## ğŸ¤– ì œë„¤ë¦­ ì‚¬ìš©ë²•

### ğŸ¦¾ í•¨ìˆ˜ì˜ ì œë„¤ë¦­

- í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ë‚˜ ë°˜í™˜ ê°’ì— ë‹¤ì–‘í•œ íƒ€ì…ì„ ë„£ê³  ì‹¶ì„ ë•Œ

```ts
// target ìœ í˜•ì˜ ë°ì´í„°ì— ëŒ€í•œ ì½ê¸° ì „ìš© ì•¡ì„¸ìŠ¤ë¥¼ ì œê³µí•œë‹¤.
function ReadOnlyRepo<T>(
  // TypeORM ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ê¸°ëŠ¥ë“¤ (ì¼ë°˜ ê°ì²´, ì—”í‹°í‹° ìŠ¤í‚¤ë§ˆ)
  target: ObjectType<T> | EntitySchema<T> | string
): Repository<T> {
  return getConnection("ro").getRepository(target);
}
```

### ğŸ¦¿ í˜¸ì¶œ ì‹œê·¸ë‹ˆì²˜ì˜ ì œë„¤ë¦­

> í˜¸ì¶œ ì‹œê·¸ë‹ˆì²˜

- TSì˜ í•¨ìˆ˜ íƒ€ì… ë¬¸ë²•ìœ¼ë¡œ í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ì™€ ë°˜í™˜íƒ€ì…ì„ ë¯¸ë¦¬ ì„ ì–¸í•˜ëŠ” ê²ƒ
- í•¨ìˆ˜ í˜¸ì¶œ ì‹œ í•„ìš”í•œ íƒ€ì…ì„ ë³„ë„ë¡œ ì§€ì •í•  ìˆ˜ ìˆë‹¤.

```ts
// ê´„í˜¸ ì•ì— ì„ ì–¸í•˜ì—¬ í•¨ìˆ˜ ì‹¤ì œ í˜¸ì¶œ ì‹œ ì œë„¤ë¦­ íƒ€ì…ì„ êµ¬ì²´ì ìœ¼ë¡œ í•œì •í•œë‹¤.
export type UseRequesterHookType = <RequestData = void, ResponseData = void>(
  base_url?: string | Headers,
  defaultHeader?: Headers
) => [RequestStatus, Requester<RequestData, ResponseData>];
```

### ğŸ”© ì œë„¤ë¦­ í´ë˜ìŠ¤

- ì™¸ë¶€ì—ì„œ ì…ë ¥ëœ íƒ€ì…ì„ í´ë˜ìŠ¤ ë‚´ë¶€ì— ì ìš©í•  ìˆ˜ ìˆëŠ” í´ë˜ìŠ¤

```ts
// <T>: ë©”ì„œë“œì˜ ë§¤ê°œë³€ìˆ˜ë‚˜ ë°˜í™˜ íƒ€ì…
// í´ë˜ìŠ¤ ì „ì²´ì— ê±¸ì³ íƒ€ì… ë§¤ê°œë³€ìˆ˜ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë‹¤.
class LocalDB<T> {
  // T íƒ€ì…ì˜ ë°ì´í„°ë¥¼ DBì— ì €ì¥
  async put(table: string, row: T): Promise<T> {
    return new Promise<T>((resolved, rejected) => {});
  }
  // ...
}

export default class IndexedDB implements ICacheStore {
  // í•´ë‹¹ íƒ€ì…ì´ í´ë˜ìŠ¤ ë‚´ë¶€ì—ì„œ ì‚¬ìš©ë  ì œë„¤ë¦­ íƒ€ì…ìœ¼ë¡œ ê²°ì •ëœë‹¤.
  private _DB?: LocalDB<{
    key: string;
    value: Promise<Record<string, unknown>>;
    cacheTTL: number;
  }>;

  private DB() {
    if (!this._DB) {
      this._DB = new LocalDB("localCache", {
        ver: 6,
        tables: [{ name: TABLE_NAME, keyPath: "key" }],
      });
    }
    return this._DB;
  }
}
```

### ğŸ”§ ì œí•œëœ ì œë„¤ë¦­

- íƒ€ì… ë§¤ê°œë³€ìˆ˜ì— ëŒ€í•œ ì œì•½ì¡°ê±´ì„ ì„¤ì •í•˜ëŠ” ê¸°ëŠ¥

> íƒ€ì… ë§¤ê°œë³€ìˆ˜

- íƒ€ì… ë§¤ê°œë³€ìˆ˜ê°€ íŠ¹ì • íƒ€ì…ìœ¼ë¡œ ë¬¶ì˜€ì„ ë•Œì˜ í‚¤

```ts
// íƒ€ì… ë§¤ê°œë³€ìˆ˜ëŠ” íŠ¹ì • íƒ€ì…ì„ ìƒì†í•´ string íƒ€ì…ìœ¼ë¡œ ì œì•½í•œë‹¤.
// string: í‚¤ì˜ ìƒí•œ í•œê³„
type ErrorRecord<Key extends string> = Exclude<Key, ErrorCodeType> extends never
  ? Partial<Record<Key, boolean>>
  : never;
```

- ìœ ë‹ˆì˜¨ íƒ€ì…ì„ ìƒì†í•´ì„œ ì„ ì–¸í•  ìˆ˜ë„ ìˆë‹¤.

```ts
function useSelectPagination<
  T extends CardListContent | CommonProductResponse
>({
  filterAtom,
}: useSelectPaginationProps<T>): {
  intersectionRef: RefObject<HTMLDivElement>;
} {
  // ...
}

// How to Use
const { intersectionRef } = useSelectPagination<CardListContent>({
  filterAtom: replyCardFilterAtom,
});
```

### âš™ï¸ í™•ì¥ëœ ì œë„¤ë¦­

- ì œë„¤ë¦­ì˜ ìœ ì—°ì„±ì„ ìƒì–´ë²„ë¦° ê²½ìš°

  ```ts
  <Key extends string> // íƒ€ì…ì„ ì œì•½
  ```

- ì œë„¤ë¦­ì˜ ìœ ì—°ì„±ì„ ìƒì§€ ì•Šìœ¼ë©´ì„œ íƒ€ì…ì„ ì œì•½í•˜ë ¤ë©´?
  - â¡ï¸ íƒ€ì… ë§¤ê°œë³€ìˆ˜ì— ìœ ë‹ˆì˜¨ íƒ€ì…ì„ ìƒì†í•´ì„œ ì„ ì–¸í•œë‹¤.
  ```ts
  <Key extends string | number>
  ```

<details>
<summary>íƒ€ì… ë³€ìˆ˜ê°€ ì—¬ëŸ¬ ê°œì¼ ë•Œ ë§¤ê°œë³€ìˆ˜ë¥¼ ì¶”ê°€í•˜ì—¬ ì„ ì–¸í•œ ì˜ˆì‹œ</summary>
<div markdown="1">

- `<T, E>`
  - **T**: ì„±ê³µì ì¸ ì‘ë‹µ ë°ì´í„°ì˜ íƒ€ì…
  - **E**: ì˜¤ë¥˜ ì‘ë‹µ ë°ì´í„°ì˜ íƒ€ì…

```ts
export class APIResponse<OK, Err = string>{

  // ì‘ë‹µ ë°ì´í„°
  private readonly data: OK | Err | null;
  // ì‘ë‹µ ìƒíƒœ
  private readonly status: ResponseStatus;
  // HTTP ìƒíƒœ ì½”ë“œ
  private readonly statusCode: number | null;

  // ìƒì„±ìë¡œ ì†ì„± ì´ˆê¸°í™”
  constructor(
    data: OK | Err | null,
    status: ResponseStatus
    statusCode: number | null,
  ){
    this.data = data;
    this.status = status;
    this.statusCode = statusCode;
  }

  // ì„±ê³µ ì‘ë‹µ ë°˜í™˜
  // ì‘ë‹µ ë°ì´í„°ì™€ HTTP ìƒíƒœì½”ë“œ 200ì„ ê°€ì§€ê³  APIResponse ê°ì²´ ë°˜í™˜
  public static Success<T, E = string>(data: T): APIResponse<T, E>{
    return new this<T, E>(data, 200, ResponseStatus.SUCCESS)
  }

  // ì˜¤ë¥˜ ì‘ë‹µ ë°˜í™˜
  // AxiosErrorì˜ response ì†ì„±ì„ ê¸°ë°˜ìœ¼ë¡œ ì˜¤ë¥˜ ìœ í˜•ì— ë”°ë¼ ì ì ˆí•œ APIResponse ê°ì²´ ë°˜í™˜
  public static Error<T, E = unknown>(init: AxiosError): APIResponse<T, E>{
    if(!init.respose){
      return new this<T, E>(null, null, ResponseStatus.CLIENT_ERROR)
    }

    if(!init.response.data?.result){
      return new this<T, E>(
        null, init.response.status, ResponseStatus.SERVER_ERROR
      )
    }
  }

  return new this<T, E>(
    init.response.data.result,
    init.response.status,
    ResponseStatus.FAILURE
  )
}

// ì‚¬ìš©í•˜ëŠ” ì½”ë“œ
// APIì—ì„œ ìƒì  ì •ë³´ë¥¼ ê°€ì§€ê³  ì˜¤ëŠ” ë¹„ë™ê¸° í•¨ìˆ˜
// API.getìœ¼ë¡œ ìƒì  ì •ë³´ë¥¼ ìš”ì²­í•˜ê³  ì‘ë‹µì„ APIResponseë¡œ ë³€í™˜í•´ ë°˜í™˜í•œë‹¤.
const fetchShopStatus = async (): Promise<APIResponse<IShopResponse | null>> => {
  return (await API.get<IShopResponse | null>("/shop", config)).map(it => it.result)
}
```

</div>
</details>

### ğŸª› ì œë„¤ë¦­ ì˜ˆì‹œ

> API ì‘ë‹µ ê°’ì˜ íŒŒì¼ ì§€ì • ì‹œ ì œë„¤ë¦­ ì‚¬ìš©í•˜ê¸°

- ê°€ë…ì„±ì„ ë†’ì´ê³  ì½”ë“œë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.

```ts
// Data: API ì‘ë‹µ ê°’ì— ë”°ë¼ ë‹¬ë¼ì§€ëŠ” data
export interface ApiResponse<Data> {
  data: Data;
  statusCode: string;
  statusMessage?: string;
}

// ì´ì™€ ê°™ì´ ì‚¬ìš©í•œë‹¤.
export const fetchInfo = (): Promise<ApiResponse<PriceInfo>> => {
  const priceUrl = "https: ";

  return request({
    method: "GET",
    url: priceUrl,
  });
};
```

### âš ï¸ ì œë„¤ë¦­ì´ í•„ìš”í•˜ì§€ ì•Šì€ ê²½ìš°

> ì œë„¤ë¦­ì„ êµ³ì´ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ ë˜ëŠ” íƒ€ì…

```ts
type GType<T> = T;
type ReqType = "USE" | "UNUSE" | "NONSELECT";

// GTypeì€ ë‹¤ë¥¸ ê³³ì—ì„œëŠ” ì‚¬ìš©ë˜ì§€ ì•Šê³  í•¨ìˆ˜ì˜ ë°˜í™˜ ê°’ íƒ€ì…ìœ¼ë¡œë§Œ ì‚¬ìš©í•˜ê³  ìˆë‹¤.
// íƒ€ì… ë§¤ê°œë³€ìˆ˜ë¥¼ ê·¸ëŒ€ë¡œ ì„ ì–¸í•˜ëŠ” ê²ƒê³¼ ê°™ìŒì—ë„ ì‚¬ìš©í•˜ì—¬ ì½”ë“œ ê¸¸ì´ë§Œ ëŠ˜ì–´ë‚˜ê³  ê°€ë…ì„±ì´ ë–¨ì–´ì§„ë‹¤.
interface Order {
  getRequirement(): GType<ReqType>; // ë°”ë¡œ ReqTypeì„ ì“°ëŠ” ê²ƒê³¼ ë™ì¼í•˜ë‹¤.
}
```

> ì œë„¤ë¦­ì— `any` ì‚¬ìš©í•˜ê¸°

- ì œë„¤ë¦­ì˜ ì½”ë“œ ì¬ì‚¬ìš©ì„±ê³¼ íƒ€ì… ì¶”ë¡ , íƒ€ì… ê²€ì‚¬ë¥¼ ì ìš©í•  ìˆ˜ ì—†ë‹¤.

```ts
type ReturnType<T = any>{
  // ì¼ë°˜ JSì™€ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒê³¼ ê°™ë‹¤.
}
```

> ê°€ë…ì„±ì„ ê³ ë ¤í•˜ì§€ ì•Šì€ ì‚¬ìš©

- ë³µì¡í•œ ì œë„¤ë¦­ì€ ì˜ë¯¸ ë‹¨ìœ„ë¡œ ë¶„í• í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

```ts
ReturnType<
  Record<
    OrderType,
    Partial<
      Record<CommonOrderStatus | CommonReturnStatus>,
      Partial<Record<OrderType, string[]>>
    >
  >
>;

// ë‹¤ìŒê³¼ ê°™ì´ ë¶„í• í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
type CommonStatus = CommonOrderStatus | CommonReturnStatus;

type PartialOrderRole = Partial<Record<OrderType, string[]>>;

type RecordCommonOrder = Record<CommonStatus, PartialOrderRole>;

type RecordOrder = Record<OrderType, Partial<RecordCommonOrder>>;

ReturnType<RecordOrder>; // ê°€ë…ì„±ì´ ì¢‹ì•„ì¡Œë‹¤!
```
