## ✨ 변경 관련된 오류 방지를 위해 `readonly` 사용하기

### `readonly` 접근 제어자

```ts
const arr: readonly number[] = [1, 2, 3];
```

- 배열의 요소를 읽는 것만 가능하다.
- `length`를 읽는 것만 가능하다.
- 배열을 변경하는 메서드를 호출할 수 없다.
- 변경 가능한 배열을 할당할 수 있다.
  - 반대로 변경 불가능한 `readonly` 배열을 변경 가능한 배열에 할당하는 것은 불가능하다.

> 매개변수를 `readonly`로 설정할 경우

1. TS는 함수 내에서 매개변수의 변경이 일어나는지 검사한다.
2. 호출부에서는 함수가 매개변수를 변경하지 않음을 보장받는다.
3. 호출부에서 함수에 `readonly` 배열을 매개변수로 넣는 것도 가능하다.

- 명시적으로 함수가 매개변수를 변경하지 않는다고 선언할 수 있다.

> `readonly`로 지역 변수와 관련된 오류 방지하기

- 복사본을 만들어 불변성을 보장한다.
- 지역변수를 `readonly`로 선언하고 원본을 수정하지 않고 새로운 값을 반환하는 메서드를 사용한다.

```ts
// 변경 가능한 배열의 readonly 배열임을 나타낸다.
const array: (readonly string[])[] = [];
```

- 타입 단언을 사용해 `readonly` 속성을 제거할 수 있다.

### `readonly` 사용 시 주의할 점

#### 💫 `readonly`는 얕게 동작한다.

- 객체의 `readonly` 배열이 있다고 해도 객체 자체는 `readonly`가 아니다.
- 이는 `Readonly<>` 제너릭에서도 동일하다.
- 깊은 `readonly` 지원을 위해서는 **ts-essentials**의 `DeepReadonly` 제너릭을 쓸 수 있다.
