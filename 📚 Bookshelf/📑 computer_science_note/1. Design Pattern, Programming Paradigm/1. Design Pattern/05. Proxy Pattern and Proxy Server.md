## 🌟 프록시 패턴과 프록시 서버 (Proxy Pattern)

### ⚔️ 프록시 패턴

- 대상 객체에 접근하기 전 그 접근에 대한 흐름을 가로채 대상 객체 앞단의 인터페이스 역할을 하는 디자인 패턴
- 객체의 속성, 변환 등을 보완할 수 있다.
- 데이터 검증, 캐싱, 로깅에 사용할 수 있다.

```
👩‍🏫 이는 프록시 객체 뿐만 아니라 프록시 서버로도 활용됩니다!
```

### 🌐 프록시 서버 (Proxy Server)

- 서버와 클라이언트 사이에서 클라이언트가 자신을 통해 다른 네트워크 서비스에 간접적으로 접속할 수 있게 해주는 컴퓨터 시스템이나 응용 프로그램

> 프록시 서버에서의 캐싱

- 캐시 안에 정보를 담아둔 상태에서, 캐시 안에 있는 정보를 요구하는 요청에 대해 원격 서버에 요청하는 대신 캐시 안에 있는 데이터를 활용하는 것
- 외부에 대한 불필요한 연결을 방지하여 트래픽을 줄일 수 있다.

### ✨ 프록시 서버로 쓰는 `nginx`

- 비동기 이벤트 기반의 구조와 다수으. 연결을 효과적으로 처리 가능한 웹 서버
- `Node.js` 서버 앞단의 프록시 서버로 활용된다.
  - 익명 사용자의 직접적인 서버 접근을 차단하고 간접적으로 한 단계를 더 거치게 하여 보안성을 강화할 수 있다.
- `nginx`를 프록시 서버로 사용하여
  - 실제 포트를 숨길 수 있다.
  - 정적 자원을 `gzip` 압축할 수 있다.
  - 메인 서버 앞단에서의 로깅을 할 수 있다.

> 버퍼 오버플로우

- 메모리 공간을 벗어나는 경우
  - 버퍼: 데이터가 저장되는 메모리 공간
- 사용되지 않아야 할 영역에 데이터가 덮어씌워져 주소/값을 바꾸는 공격이 발생할 위험이 있다.

> `gzip` 압축

- `LZ77`과 `Huffman 코딩`의 조합인 `DEFLATE` 알고리즘을 기반으로 한 압축 기술
  - **LZ77**: 입력 문자열을 순회하면서 이전에 등장했었던 반복되는 부분문자열을 압축하는 방식
  - **Huffman 코딩**: 가변길이 코딩을 만들기 위한 알고리즘. 문자를 표현하는 비트를 최대한 짧게 사용해서 길이를 압축시킨다.
- 데이터 전송량을 줄일 수 있다.
- 압축 해제 시 서버에서의 CPU 오버헤드를 고려한 사용 유무 결정이 필요하다.

### ✨ 프록시 서버로 쓰는 `CloudFlare`

> CDN (Content Delivery Network)

- 전 세계적으로 분산된 서버를 통해 어떠한 시스템의 콘텐츠 전달을 빠르게 할 수 있게 해주는 CDN 서비스
- 각 사용자가 인터넷에 접속하는 곳과 가까운 곳에서 콘탠츠를 캐싱 또는 배포하는 서버 네트워크
- 데이터 사용량이 많은 애플리케이션의 웹 페이지 로드 속도를 높이고 사용자가 웹 서버로부터 콘텐츠를 다운로드하는 시간을 줄일 수 있다.

<img src="https://github.com/JeongwooHam/FE_Study_Logs/assets/123251211/56ca7683-f06b-455b-9f1c-e2813f309c7f"/>

- 웹 서버 앞단에 프록시 서버를 두어 사용자, 크롤러, 공격자가 웹 사이트에 접속할 경우 `CloudFlare`를 통해 공격자로부터 페이지를 보호할 수 있다.

> DDOS 공격 방어

- `DDOS`
  - 짧은 기간 동안 네트워크에 많은 요청을 보내 네트워크를 마비시켜 웹사이트의 가용성을 방해하는 사이버 공격 유형
- CloudFlare의 공격 방어
  - 사용자가 접속하는 것이 아닌 시스템을 통해 오는 트래픽과 같은 의심스러운 트래픽을 자동으로 차단하여 DDOS 공격으로부터 보호한다.
  - CloudFlare의 거대한 네트워크 용량과 캐싱 전략으로 공격을 쉽게 막을 수 있다.
  - CloudFlare는 이러한 공격에 대한 방화벽 대시보드도 제공한다.

> HTTPS 구축

- 서버에서 `HTTPS` 구축 시 인증서 기반 구축이 가능하다.
- CloudFlare 사용 시 별도의 인증서 설치 없이 손쉬운 구축이 가능하다.

### ✨ `CORS`와 FE의 프록시 서버

> 오리진

- 프로토콜 + 호스트 이름 + 포트
- `https://localhost:3000/profile`에서 `https://localhost:3000` 부분을 의미한다.

> CORS (Cross-Origin Resource Sharing)

- 서버가 웹 브라우저에서 리소스를 로드할 때 다른 오리진을 통해 로드하지 못하게 하는 `HTTP` 헤더 기반 메커니즘

<img src="https://github.com/JeongwooHam/FE_Study_Logs/assets/123251211/da3a9a3c-331b-4a28-821d-c6e4da090a1f" width="40%"/>

- FE 서버를 만들어 BE 서버와 통신 시 CORS 에러를 마주치게 된다.
  - FE 서버는 `127.0.0.1:3000`이고 BE 서버는 `127.0.0.1:8000`이라면 포트 번호가 달라 CORS 에러가 발생한다.
  - 이때 프록시 서버를 사용하여 FE 서버 요청 오리진을 `127.0.0.1:8000`로 바꿀 수 있다.

<img src="https://github.com/JeongwooHam/FE_Study_Logs/assets/123251211/5d1b1904-4095-4ab1-b608-cf1a458ebf11" width="40%"/>

- 위 그림처럼 FE 서버 앞단에 프록시 서버를 놓아 `/api` 요청은 `usersAPI`, `/api2` 요청은 `usersAPI2`에 요청할 수 있다.
